<template>
    <div class="container-fluid">
        <div show.bind="!isAuthenticated" class="row">
            <div class="col-sm-12">
                <form role="form" submit.delegate="authenticate()">
                    <fieldset>
                        <legend>TeamworkPM Authenticate</legend>
                        <div class="form-group">
                            <label for="apiTokenInput">API Token</label>
                            <input id="apiTokenInput" type="text" class="form-control" value.bind="apiToken" placeholder="e.g. summer50now" />
                        </div>
                        <button type="submit" class="btn btn-default">Submit</button>
                    </fieldset>
                </form>
            </div>
        </div>
        <div class="row">
            <div class="col-sm-12">
                <button show.bind="isAuthenticated" click.trigger="loadTasks()" type="button" class="btn btn-primary"> Load Tasks</button>
                <h1>My Actionables</h1>
                <table class="table table-striped table-hover table-bordered">
                    <caption>There are ${myTasks.length} tasks!</caption>
                    <tr>
                        <th>Project</th>
                        <th>Task List</th>
                        <th>Task Name</th>
                        <th>Status</th>
                    </tr>
                    <tr repeat.for="task of myTasks">
                        <td><a target="_blank" href="https://mmgct.teamwork.com/projects/${task['project-id']}">${task["project-name"]}</a></td>
                        <td><a target="_blank" href="https://mmgct.teamwork.com/tasklists/${task['todo-list-id']}">${task["todo-list-name"]}</a></td>
                        <td><a target="_blank" href="https://mmgct.teamwork.com/tasks/${task.id}">${task.content}</a> </td>
                        <td>${task.status}</td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</template>